import { assertEquals } from "https://deno.land/std@0.224.0/assert/mod.ts";
import { decode } from "./mod.ts";

const text = "Lorem ipsum dolor sit amet ipsum. Ut no aliquyam takimata et et ipsum duo diam accusam. Magna eirmod justo in nisl eum dolor dolor clita lorem ea. Ea eu ipsum labore kasd. Erat in dolores molestie option. Sadipscing elitr eos molestie dolor molestie lorem et dolore luptatum facilisis dolore illum ipsum dolore consetetur rebum et elitr. Minim vero dolor diam dolor accusam diam sea sea duis. Tempor nonumy dolor amet zzril elitr feugait ut sit blandit vero dolor invidunt luptatum accusam erat clita. Ut rebum in nonummy clita ut justo sed amet lorem at dolor dolor et.";
const shift_jis = new Uint8Array([
    76, 111, 114, 101, 109, 32, 105, 112, 115, 117, 109, 32, 100, 111, 108, 111, 114, 32, 115, 105, 116, 32, 97, 109, 101, 116, 32, 105, 112, 115, 117, 109, 46, 32, 85, 116, 32, 110, 111, 32, 97, 108, 105, 113, 117, 121, 97, 109, 32, 116, 97, 107, 105, 109, 97, 116, 97, 32, 101, 116, 32, 101, 116, 32, 105, 112, 115, 117, 109, 32, 100, 117, 111, 32, 100, 105, 97, 109, 32, 97, 99, 99, 117, 115, 97, 109, 46, 32, 77, 97, 103, 110, 97, 32, 101, 105, 114, 109, 111, 100, 32, 106, 117, 115, 116, 111, 32, 105, 110, 32, 110, 105, 115, 108, 32, 101, 117, 109, 32, 100, 111, 108, 111, 114, 32, 100, 111, 108, 111, 114, 32, 99, 108, 105, 116, 97, 32, 108, 111, 114, 101, 109, 32, 101, 97, 46, 32, 69, 97, 32, 101, 117, 32, 105, 112, 115, 117, 109, 32, 108, 97, 98, 111, 114, 101, 32, 107, 97, 115, 100, 46, 32, 69, 114, 97, 116, 32, 105, 110, 32, 100, 111, 108, 111, 114, 101, 115, 32, 109, 111, 108, 101, 115, 116, 105, 101, 32, 111, 112, 116, 105, 111, 110, 46, 32, 83, 97, 100, 105, 112, 115, 99, 105, 110, 103, 32, 101, 108, 105, 116, 114, 32, 101, 111, 115, 32, 109, 111, 108, 101, 115, 116, 105, 101, 32, 100, 111, 108, 111, 114, 32, 109, 111, 108, 101, 115, 116, 105, 101, 32, 108, 111, 114, 101, 109, 32, 101, 116, 32, 100, 111, 108, 111, 114, 101, 32, 108, 117, 112, 116, 97, 116, 117, 109, 32, 102, 97, 99, 105, 108, 105, 115, 105, 115, 32, 100, 111, 108, 111, 114, 101, 32, 105, 108, 108, 117, 109, 32, 105, 112, 115, 117, 109, 32, 100, 111, 108, 111, 114, 101, 32, 99, 111, 110, 115, 101, 116, 101, 116, 117, 114, 32, 114, 101, 98, 117, 109, 32, 101, 116, 32, 101, 108, 105, 116, 114, 46, 32, 77, 105, 110, 105, 109, 32, 118, 101, 114, 111, 32, 100, 111, 108, 111, 114, 32, 100, 105, 97, 109, 32, 100, 111, 108, 111, 114, 32, 97, 99, 99, 117, 115, 97, 109, 32, 100, 105, 97, 109, 32, 115, 101, 97, 32, 115, 101, 97, 32, 100, 117, 105, 115, 46, 32, 84, 101, 109, 112, 111, 114, 32, 110, 111, 110, 117, 109, 121, 32, 100, 111, 108, 111, 114, 32, 97, 109, 101, 116, 32, 122, 122, 114, 105, 108, 32, 101, 108, 105, 116, 114, 32, 102, 101, 117, 103, 97, 105, 116, 32, 117, 116, 32, 115, 105, 116, 32, 98, 108, 97, 110, 100, 105, 116, 32, 118, 101, 114, 111, 32, 100, 111, 108, 111, 114, 32, 105, 110, 118, 105, 100, 117, 110, 116, 32, 108, 117, 112, 116, 97, 116, 117, 109, 32, 97, 99, 99, 117, 115, 97, 109, 32, 101, 114, 97, 116, 32, 99, 108, 105, 116, 97, 46, 32, 85, 116, 32, 114, 101, 98, 117, 109, 32, 105, 110, 32, 110, 111, 110, 117, 109, 109, 121, 32, 99, 108, 105, 116, 97, 32, 117, 116, 32, 106, 117, 115, 116, 111, 32, 115, 101, 100, 32, 97, 109, 101, 116, 32, 108, 111, 114, 101, 109, 32, 97, 116, 32, 100, 111, 108, 111, 114, 32, 100, 111, 108, 111, 114, 32, 101, 116, 46
]);

const utf8 = new Uint8Array([
    76, 111, 114, 101, 109, 32, 105, 112, 115, 117, 109, 32, 100, 111, 108, 111, 114, 32, 115, 105, 116, 32, 97, 109, 101, 116, 32, 105, 112, 115, 117, 109, 46, 32, 85, 116, 32, 110, 111, 32, 97, 108, 105, 113, 117, 121, 97, 109, 32, 116, 97, 107, 105, 109, 97, 116, 97, 32, 101, 116, 32, 101, 116, 32, 105, 112, 115, 117, 109, 32, 100, 117, 111, 32, 100, 105, 97, 109, 32, 97, 99, 99, 117, 115, 97, 109, 46, 32, 77, 97, 103, 110, 97, 32, 101, 105, 114, 109, 111, 100, 32, 106, 117, 115, 116, 111, 32, 105, 110, 32, 110, 105, 115, 108, 32, 101, 117, 109, 32, 100, 111, 108, 111, 114, 32, 100, 111, 108, 111, 114, 32, 99, 108, 105, 116, 97, 32, 108, 111, 114, 101, 109, 32, 101, 97, 46, 32, 69, 97, 32, 101, 117, 32, 105, 112, 115, 117, 109, 32, 108, 97, 98, 111, 114, 101, 32, 107, 97, 115, 100, 46, 32, 69, 114, 97, 116, 32, 105, 110, 32, 100, 111, 108, 111, 114, 101, 115, 32, 109, 111, 108, 101, 115, 116, 105, 101, 32, 111, 112, 116, 105, 111, 110, 46, 32, 83, 97, 100, 105, 112, 115, 99, 105, 110, 103, 32, 101, 108, 105, 116, 114, 32, 101, 111, 115, 32, 109, 111, 108, 101, 115, 116, 105, 101, 32, 100, 111, 108, 111, 114, 32, 109, 111, 108, 101, 115, 116, 105, 101, 32, 108, 111, 114, 101, 109, 32, 101, 116, 32, 100, 111, 108, 111, 114, 101, 32, 108, 117, 112, 116, 97, 116, 117, 109, 32, 102, 97, 99, 105, 108, 105, 115, 105, 115, 32, 100, 111, 108, 111, 114, 101, 32, 105, 108, 108, 117, 109, 32, 105, 112, 115, 117, 109, 32, 100, 111, 108, 111, 114, 101, 32, 99, 111, 110, 115, 101, 116, 101, 116, 117, 114, 32, 114, 101, 98, 117, 109, 32, 101, 116, 32, 101, 108, 105, 116, 114, 46, 32, 77, 105, 110, 105, 109, 32, 118, 101, 114, 111, 32, 100, 111, 108, 111, 114, 32, 100, 105, 97, 109, 32, 100, 111, 108, 111, 114, 32, 97, 99, 99, 117, 115, 97, 109, 32, 100, 105, 97, 109, 32, 115, 101, 97, 32, 115, 101, 97, 32, 100, 117, 105, 115, 46, 32, 84, 101, 109, 112, 111, 114, 32, 110, 111, 110, 117, 109, 121, 32, 100, 111, 108, 111, 114, 32, 97, 109, 101, 116, 32, 122, 122, 114, 105, 108, 32, 101, 108, 105, 116, 114, 32, 102, 101, 117, 103, 97, 105, 116, 32, 117, 116, 32, 115, 105, 116, 32, 98, 108, 97, 110, 100, 105, 116, 32, 118, 101, 114, 111, 32, 100, 111, 108, 111, 114, 32, 105, 110, 118, 105, 100, 117, 110, 116, 32, 108, 117, 112, 116, 97, 116, 117, 109, 32, 97, 99, 99, 117, 115, 97, 109, 32, 101, 114, 97, 116, 32, 99, 108, 105, 116, 97, 46, 32, 85, 116, 32, 114, 101, 98, 117, 109, 32, 105, 110, 32, 110, 111, 110, 117, 109, 109, 121, 32, 99, 108, 105, 116, 97, 32, 117, 116, 32, 106, 117, 115, 116, 111, 32, 115, 101, 100, 32, 97, 109, 101, 116, 32, 108, 111, 114, 101, 109, 32, 97, 116, 32, 100, 111, 108, 111, 114, 32, 100, 111, 108, 111, 114, 32, 101, 116, 46
]);

Deno.test("shift_jis", () => {
    const decoded = decode(shift_jis);
    assertEquals(decoded, text);
});

Deno.test("utf8", () => {
    const decoded = decode(utf8);
    assertEquals(decoded, text);
});